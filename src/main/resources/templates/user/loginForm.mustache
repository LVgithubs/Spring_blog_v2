{{> /layout/header}}

<!-- 컨테이너 시작 -->
<div class="container mt-3">

    <!-- 로그인 폼 시작 -->
    <form>
        <div class="mb-3 mt-3">
            <input id="username" type="text" class="form-control" placeholder="Enter username" required maxlength="12">
        </div>
        <div class="mb-3">
            <input id="password" type="password" class="form-control" placeholder="Enter password" required maxlength="12">
        </div>
        <div class="form-check mb-3">
            <label class="form-check-label">
                <input class="form-check-input" type="checkbox"> Remember me
            </label>
        </div>
        <button id="btn-login" type="button" class="btn btn-primary">로그인</button>
    </form>
    <!-- 로그인 폼 끝 -->

</div>
<!-- 컨테이너 끝 -->


<script>

$("#btn-login").click(()=>{
    login();
});
// 2. 기능
 function login(){
     // (1) 오브젝트로 만들어야한다. - > username, password 를 찾아서 java script 오브젝트로 만든다.
        let userDto = {
            username: $("#username").val(),
            password: $("#password").val(),
        }
        
     // (2) JSON으로 변환한다. (JSON이 통신의 표준이니까.)


     // (3) fetch 요청
        let response = await fetch("/api/login", {
            method: "POST",
            body: JSON.stringify(userDto),
            headers: {
                'Content-Type': 'application/json; charset=utf-8',
            }
        });
     // (4) 회원가입이 잘 되면 알림창을 띄우고, 로그인 페이지로 이동한다.

        let responseParse = await response.json();
                if (responseParse.code == 1) {
            alert("로그인 성공");
            location.href = "/loginForm";
        } else {
            alert("로그인 실패");
        }

 }


</script>


{{> /layout/footer}}